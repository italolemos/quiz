 var quiztitle = "Geo Quiz";


  var quiz = [

        {
            "question" : "Quantos estados possui a região nordeste?",
            "choices" : [
                                    "7 Estados",
                                    "9 Estados",
                                    "5 Estados",
                                    "8 Estados"
                                ],
            "correct" : "9 Estados",
            "id":"0"
        },

        {
            "question" : "Qual alternativa indica corretamente a região que abriga o estado de Pernambuco?",
            "choices" : [
                                    "Sul",
                                    "Norte",
                                    "Centro-Oeste",
                                    "Sudeste",
                                    "Nordeste"
                                ],
            "correct" : "Nordeste",
            "id":"1"
        },

        {
            "question" : "A capital de Pernambuco é a cidade de",
            "choices" : [
                                    "Natal",
                                    "Recife",
                                    "Maceió",
                                    "João Pessoa",
                                    "Aracajú"
                                ],
            "correct" : "Recife",
            "id":"2"
        },
        {
            "question" : "Sobre os aspectos físicos de Pernambuco e marque a alternativa INCORRETA.",
            "choices" : [
                                    "O território pernambucano está localizado na Região Nordeste do Brasil, sendo banhado pelo Oceano Atlântico.",
                                    "Pernambuco apresenta vegetações variadas de acordo com cada região, predominando as áreas de caatinga, floresta tropical e mangues litorâneos.",
                                    "A maioria dos rios de Pernambuco pertence à Região Hidrográfica do São Francisco.",
                                    "Ponta do Seixas, considerada o ponto extremo leste do território brasileiro, está localizada em Pernambuco.",
                                    "Os climas predominantes no estado são o tropical atlântico e o semiárido."
                                ],
            "correct" : "Ponta do Seixas, considerada o ponto extremo leste do território brasileiro, está localizada em Pernambuco.",
            "id":"3"
        },
        {
            "question" : "Em quais regiões está divido o estado de Pernambuco? ",
            "choices" : [
                                    "Norte, Leste e Sul",
                                    "Zona da Mata, Agreste, Sertão",
                                    "Litoral e Sertão"
                                ],
            "correct" : "Zona da Mata, Agreste, Sertão",
            "id":"4"
        },
        {
            "question" : "Quais desses rios atravessam o sertão pernambucano?",
            "choices" : [
                                    "Nilo",
                                    "Tiête",
                                    "São Francisco",
                                    "Amazonas"
                                ],
            "correct" : "São Francisco",
            "id":"5"
        },
        {
            "question" : "A zona da mata pernmabucana é banhada pelo oceano ",
            "choices" : [
                                    "Pacífico",
                                    "Índico",
                                    "Atlântico"
                                ],
            "correct" : "Atlântico",
            "id":"6"
        },
         {
            "question" : "Quais destas biodiversidades aparecem em Pernambuco?",
            "choices" : [
                                    "Floresta Amazonica",
                                    "Cerrado",
                                    "Caatinga"
                                ],
            "correct" : "Caatinga",
            "id":"7"
        },

         {
            "question" : "Qual a cidade mais populosa do Brasil?",
            "choices" : [
                                   "Belo Horizonte",
                                    "Manaus",
                                    "Rio de Janeiro",
                                    "São Paulo",
                                    "Fortaleza"
                                ],
            "correct" : "São Paulo",
            "id":"8"
        },
         {
            "question" : "Como são chamados os quatro pontos colaterais na rosa-dos-ventos?",
            "choices" : [
                                    "Norte, Sul, Leste e Oeste",
                                    "Frente, Atrás, Esquerda e Direita"
                                ],
            "correct" : "Norte, Sul, Leste e Oeste",
            "id":"9"
        },
         {
            "question" : "Águas ocasionadas da chuvam são chamadas de: ",
            "choices" : [
                                    "Pluviais",
                                    "Fluviais"


                                ],
            "correct" : "Pluviais.",
            "id":"10"
        },
         {
            "question" : "Movimentos de Rotação e Translação são realizados pela(o) ",
            "choices" : [
                                    "Sol",
                                    "Lua",
                                    "Terra"
                                ],
            "correct" : "Terra",
            "id":"11"
        },
         {
            "question" : "Um Navio é um meio de transporte:",
            "choices" : [
                                    "Aquático",
                                    "Aéreo",
                                    "Terreste"


                                ],
            "correct" : "Aquático",
            "id":"12"
        },
         {
            "question" : "O Brasil está dividido em quantas regiões?",
            "choices" : [
                                    "2 regiões",
                                    "6 regiões",
                                    "4 regiões",
                                    "5 regiões",
                                    "3 regiões"
                                ],
            "correct" : "5 regiões",
            "id":"13"
        },
         {
            "question" : "Sobre os princípios do método de desenvolvimento Scrum, que são consistentes com o manifesto ágil: O processo produz frequentes incrementos de software que podem ser inspecionados, ajustados, testados, documentados e expandidos.",
            "choices" : [
                                    "Correto",
                                    "Errado"
                                ],
            "correct" : "Correto",
            "id":"14"
        },
         {
            "question" : "Sobre os princípios do método de desenvolvimento Scrum, que são consistentes com o manifesto ágil: O trabalho de desenvolvimento e o pessoal que o realiza é dividido em partições claras, de baixo acoplamento, ou em pacotes.",
            "choices" : [
                                    "Correto",
                                    "Errado"
                                ],
            "correct" : "Correto",
            "id":"15"
        },
         {
            "question" : "Kanban é um método de desenvolvimento de software que tem como uma de suas práticas o gerenciamento do fluxo de trabalho, que deve ser monitorado, medido e reportado a cada estado do fluxo.",
            "choices" : [
                                   "Correto",
                                    "Errado"
                                ],
            "correct" : "Correto",
            "id":"16"
        },
         {
            "question" : "Nos métodos ágeis XP e Scrum, as entregas de partes funcionais do projeto são divididas em ciclos, geralmente compreendidos no período de 1 a 4 semanas. Estes ciclos denominam-se, respectivamente: sprint e iteração",
            "choices" : [
                                    "Correto",
                                    "Errado"
                                ],
            "correct" : "Correto",
            "id":"17"
        },
         {
            "question" : "No XP, os testes são escritos antes da atividade de desenvolvimento e todas as funcionalidades só possuem valor se forem testadas e obtiverem unanimidade de aprovação.",
            "choices" : [
                                   "Correto",
                                    "Errado"
                                ],
            "correct" : "Correto",
            "id":"18"
        },
         {
            "question" : "Assegurar que a equipe se concentre em fazer, primeiro, apenas aquilo que é claramente necessário e evite fazer o que poderia vir a ser necessário, mas ainda não se provou essencial. Este é um dos cinco valores fundamentais do XP (Extreme Programming), denominado: simplicidade",
            "choices" : [
                                    "Correto",
                                    "Errado"
                                ],
            "correct" : "Correto",
            "id":"19"
        },

    ];


 var currentquestion = 0,
     score = 0,
     submt = true,
     picked
     aux = 0;

 var arrayPerguntasSelecionadas = [];

 jQuery(document).ready(function ($) {


     function htmlEncode(value) {
         return $(document.createElement('div')).text(value).html();
     }


     function addChoices(choices) {
         if (typeof choices !== "undefined" && $.type(choices) == "array") {
             $('#choice-block').empty();
             for (var i = 0; i < choices.length; i++) {
                 $(document.createElement('li')).addClass('choice choice-box').attr('data-index', i).text(choices[i]).appendTo('#choice-block');
             }
         }
     }

     function nextQuestion() {
         submt = true;
         $('#explanation').empty();
         $('#question').text(quiz[currentquestion]['question']);
         $('#pager').text('Questão ' + Number(aux+1) + ' of 5');
         if (quiz[currentquestion].hasOwnProperty('image') && quiz[currentquestion]['image'] != "") {
             if ($('#question-image').length == 0) {
                 $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question'])).insertAfter('#question');
             } else {
                 $('#question-image').attr('src', quiz[currentquestion]['image']).attr('alt', htmlEncode(quiz[currentquestion]['question']));
             }
         } else {
             $('#question-image').remove();
         }
         addChoices(quiz[currentquestion]['choices']);
         setupButtons();


     }


     function processQuestion(choice) {

         if (quiz[currentquestion]['choices'][choice] == quiz[currentquestion]['correct']) {
             $('.choice').eq(choice).css({
                 'background-color': '#50D943'
             });
             score++;
         } else {
             $('.choice').eq(choice).css({
                 'background-color': '#D92623'
             });
         }
         aux++;

         currentquestion = Math.floor((Math.random() * 19));

         while(arrayPerguntasSelecionadas.indexOf(quiz[currentquestion].id) !== -1){
            //alert("tem");
            currentquestion = Math.floor((Math.random() * 19));
         }
         arrayPerguntasSelecionadas.push(quiz[currentquestion].id);






         $('#submitbutton').html('Próxima Pergunta &raquo;').on('click', function () {
             if (aux >= 5) {
                 endQuiz();
             } else {
                 $(this).text('Verificar Resposta').css({
                     'color': '#222'
                 }).off('click');
                 nextQuestion();
             }
         })
     }


     function setupButtons() {
         $('.choice').on('mouseover', function () {
             $(this).css({
                 'background-color': 'rgba(255,255,255,100%)'
             });
         });
         $('.choice').on('mouseout', function () {
             $(this).css({
                 'background-color': 'rgba(255,255,255,100%)'
             });
         })
         $('.choice').on('click', function () {
             picked = $(this).attr('data-index');
             $('.choice').removeAttr('style').off('mouseout mouseover');
             $(this).css({
                 'border-color': '#222',
                 'font-weight': 700,
                 'background-color': '#c1c1c1'
             });
             if (submt) {
                 submt = false;
                 $('#submitbutton').css({
                     'color': '#000'
                 }).on('click', function () {
                     $('.choice').off('click');
                     $(this).off('click');
                     processQuestion(picked);
                 });
             }
         })
     }


     function endQuiz() {
         $('#explanation').empty();
         $('#question').empty();
         $('#choice-block').empty();
         $('#submitbutton').remove();
         $('#question').text("Você acertou " + score + " de 5.");
         $(document.createElement('h2')).css({
             'text-align': 'center',
             'font-size': '4em'
         }).text(Math.round(score / 5 * 100) + '%').insertAfter('#question');
         var percentagemAcerto = Math.round(score / 5 * 100);
         if(percentagemAcerto >=60){
         $('<a href="menuEstagioProgramador.html"><img src="img/play3.png"></a>').attr({id: 'submitbutton'}).css({
                 'position':'absolute',
                 'left':'610px',
                 'top':'400px',
                }).insertAfter('#question');
         }else{
            $('<a href="menuEstagioEstagiario.html"><img src="img/play3.png"></a>').attr({id: 'submitbutton'}).css({
                 'position':'absolute',
                 'left':'610px',
                 'top':'400px',
                }).insertAfter('#question');
         }


     }




     function init() {
        currentquestion = Math.floor((Math.random() * 19));
        arrayPerguntasSelecionadas.push(quiz[currentquestion].id);

         //add title
         if (typeof quiztitle !== "undefined" && $.type(quiztitle) === "string") {
             $(document.createElement('h1')).text(quiztitle).appendTo('#frame');
         } else {
             $(document.createElement('h1')).text("Quiz").appendTo('#frame');
         }

         //add pager and questions
         if (typeof quiz !== "undefined" && $.type(quiz) === "array") {
             //add pager
             $(document.createElement('p')).addClass('pager').attr('id', 'pager').text('Questão 1 of 5').appendTo('#frame');
             //add first question
             $(document.createElement('h2')).addClass('question').attr('id', 'question').text(quiz[currentquestion]['question']).appendTo('#frame');
             //add image if present
            /* if (quiz[0].hasOwnProperty('image') && quiz[0]['image'] != "") {
                 $(document.createElement('img')).addClass('question-image').attr('id', 'question-image').attr('src', quiz[0]['image']).attr('alt', htmlEncode(quiz[0]['question'])).appendTo('#frame');
             }*/
             $(document.createElement('p')).addClass('explanation').attr('id', 'explanation').html('&nbsp;').appendTo('#frame');

             //questions holder
             $(document.createElement('ul')).attr('id', 'choice-block').appendTo('#frame');

             //add choices
             addChoices(quiz[currentquestion]['choices']);

             //add submit button
             $(document.createElement('div')).addClass('choice-box').attr('id', 'submitbutton').text('Verificar Resposta').css({
                 'font-weight': 700,
                 'color': '#222',
                 'padding': '20px 0',
                 'width':'200px'
             }).appendTo('#frame');

             setupButtons();

         }
     }

     init();
 });
